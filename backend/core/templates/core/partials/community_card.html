{# –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –¥–ª—è —Å–ø–∏—Å–∫–∞ /communities/ #}

<div class="card community-card position-relative" data-href="{% url 'community_detail' c.slug %}">
  <div class="card-body py-3">
    <div class="d-flex flex-column flex-md-row align-items-start gap-3">
      <div class="flex-shrink-0">
        {# –£ Community –Ω–µ—Ç avatar –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, partial avatar —É–º–µ–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω–∏—Ü–∏–∞–ª—ã #}
        {% include "core/partials/avatar.html" with user_obj=c size="md" %}
      </div>

      <div class="flex-grow-1 min-w-0">
        <div class="d-flex align-items-start justify-content-between gap-2">
          <div class="min-w-0">
            <a href="{% url 'community_detail' c.slug %}" class="community-title text-decoration-none fw-semibold text-truncate d-inline-block">
              {{ c.name }}
            </a>

            <div class="d-flex flex-wrap align-items-center gap-2 mt-1 small text-secondary">
              {# ‚úÖ —Å–Ω–∞—á–∞–ª–∞ —á–∏—Å–ª–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ #}
              <span class="badge text-bg-light border">üë• {{ c.members_total }}</span>

              {# –∑–∞—Ç–µ–º —Ö—ç—à—Ç–µ–≥–∏/slug #}
              {% if c.slug %}
                <span class="badge text-bg-light border">#{{ c.slug }}</span>
              {% endif %}
            </div>
          </div>

          <div class="community-actions d-flex align-items-center gap-2 flex-nowrap">
            <a href="{% url 'community_detail' c.slug %}" class="btn btn-outline-secondary btn-sm">–û—Ç–∫—Ä—ã—Ç—å</a>

            {% if user.is_authenticated %}
              {% if c.id in member_community_ids %}
                <button type="button" class="btn btn-outline-success btn-sm" disabled>–í—ã –ø–æ–¥–ø–∏—Å–∞–Ω—ã</button>
              {% else %}
                <form method="post"
                      action="{% url 'community_join' c.slug %}"
                      class="community-membership-form m-0"
                      data-community-slug="{{ c.slug }}"
                      data-community-id="{{ c.id }}">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-success btn-sm">–í—Å—Ç—É–ø–∏—Ç—å</button>
                </form>
              {% endif %}
            {% endif %}
          </div>
        </div>

        {% if c.description %}
          <div class="community-desc mt-2 small text-secondary">{{ c.description }}</div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
